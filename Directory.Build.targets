<Project>
  <!-- 공통 bin 폴더 정의 -->
  <PropertyGroup>
    <CommonBinDir>$(SolutionDir)bin\</CommonBinDir>
  </PropertyGroup>

  <!-- bin 및 shaders 폴더 생성 -->
  <Target Name="EnsureCommonBin"
          BeforeTargets="PrepareForBuild">
    <MakeDir Directories="$(CommonBinDir)" />
  </Target>

  <!-- 빌드 후 결과물 복사 -->
  <Target Name="CopyOutputsToCommonBin"
          AfterTargets="Build">
    <Message Importance="high"
             Text=">>> [Copy] 실행됨: $(TargetPath) -> $(CommonBinDir)" />

    <!-- exe/dll -->
    <Copy SourceFiles="$(TargetPath)"
          DestinationFolder="$(CommonBinDir)"
          SkipUnchangedFiles="true" />

    <!-- pdb (있는 경우만) -->
    <Copy SourceFiles="$(TargetDir)$(TargetName).pdb"
          DestinationFolder="$(CommonBinDir)"
          SkipUnchangedFiles="true"
          Condition="Exists('$(TargetDir)$(TargetName).pdb')" />
  </Target>
</Project>
